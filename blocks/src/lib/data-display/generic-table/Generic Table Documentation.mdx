# Revenue Table Component

The `TableComponent` is a sophisticated data table implementation designed specifically for displaying and managing revenue transactions. It provides a rich set of features including sorting, filtering, pagination, and row actions.

## Features

- üìä Responsive data table with customizable columns
- üîç Built-in search functionality
- üéØ Advanced filtering capabilities
- üì± Mobile-friendly design
- ‚ö° React Suspense integration for better performance
- üíÖ Customizable loading states
- üõ†Ô∏è Row actions and custom actions
- üìù Status indicators for transactions

## Basic Usage

```tsx
import { TableComponent } from './table-component';

function RevenuePage() {
  return <TableComponent />;
}
```

## Data Structure

The table expects data in the following format:

```typescript
interface RevenueTransation {
  invoice_id: number;
  invoice_number: string;
  customer_name: string;
  source_name: string;
  issue_date: Date;
  due_date: Date;
  amount_total: number;
  balance_remaining: number;
  status: 'Sent' | 'Paid' | 'Overdue' | 'Draft' | 'Cancelled';
  actions: {
    customActions?: ((row: RevenueTransation) => ReactNode)[];
    menuActions: {
      label: ReactNode;
      className?: string;
      shortcut?: string;
      action: (row: RevenueTransation) => void;
    }[];
  };
}
```

## Customization

### Loading State

The component includes a customizable loading skeleton. You can modify the skeleton's appearance by adjusting the following props:

```tsx
<DataTableSkeleton
  columnCount={6} // Number of columns
  searchableColumnCount={1} // Number of searchable columns
  filterableColumnCount={2} // Number of filterable columns
  cellWidths={[
    // Width of each column
    '10rem',
    '40rem',
    '12rem',
    '12rem',
    '8rem',
    '8rem',
  ]}
  shrinkZero // Prevent cell shrinking
/>
```

### Row Actions

You can customize row actions by providing an `actions` object in your data:

```typescript
const actions = {
  menuActions: [
    {
      label: 'Edit',
      action: (row) => {
        // Handle edit action
      },
    },
    {
      label: 'Delete',
      shortcut: '‚åò‚å´',
      className: 'text-red-500',
      action: (row) => {
        // Handle delete action
      },
    },
  ],
  customActions: [
    (row) => (
      <Button variant="ghost" size="sm">
        View Details
      </Button>
    ),
  ],
};
```

### Status Handling

The component supports the following status values:

- `Sent`
- `Paid`
- `Overdue`
- `Draft`
- `Cancelled`

Each status is automatically styled with appropriate colors and icons.

### Custom Cell Rendering

The table component allows for custom cell rendering through the `cell` property in column definitions. Here are some examples:

#### Basic Custom Cell

```typescript
{
  accessorKey: 'customer_name',
  header: ({ column }) => (
    <DataTableColumnHeader column={column} title="CUSTOMER" />
  ),
  cell: ({ row }) => (
    <div className="w-42">{row.getValue('customer_name')}</div>
  ),
  enableSorting: true,
  enableHiding: true,
}
```

#### Formatted Currency Cell

```typescript
{
  accessorKey: 'amount_total',
  header: ({ column }) => (
    <DataTableColumnHeader column={column} title="AMOUNT" />
  ),
  cell: ({ row }) => {
    const amount = Number.parseFloat(row.getValue('amount_total'));
    const formatted = new Intl.NumberFormat('en-US', {
      style: 'currency',
      currency: 'USD',
    }).format(amount);
    return <div>{formatted}</div>;
  },
  enableHiding: true,
  size: 10,
}
```

#### Status Cell with Badge

```typescript
{
  accessorKey: 'status',
  header: ({ column }) => (
    <DataTableColumnHeader column={column} title="STATUS" />
  ),
  cell: ({ row }) => {
    const status = row.original.status;
    const Icon = getStatusIcon(status);
    return (
      <Badge variant="outline" className="py-1 [&>svg]:size-3.5">
        <Icon />
        <span className="capitalize">{status}</span>
      </Badge>
    );
  },
  meta: {
    label: 'Status',
    variant: 'multiSelect',
    options: ['Sent', 'Paid', 'Overdue', 'Draft', 'Cancelled'].map((status) => ({
      label: status.charAt(0).toUpperCase() + status.slice(1),
      value: status,
      icon: getStatusIcon(status),
    })),
  },
}
```

#### Interactive Cell with Link

```typescript
{
  accessorKey: 'invoice_number',
  header: ({ column }) => (
    <DataTableColumnHeader column={column} title="INVOICE" />
  ),
  cell: ({ row }) => (
    <div className="w-42 text-blue-500 hover:underline hover:text-blue-600 transition cursor-pointer">
      {row.getValue('invoice_number')}
    </div>
  ),
  enableSorting: true,
  enableHiding: true,
}
```

#### Action Cell with Dropdown Menu

```typescript
{
  id: 'actions',
  header: ({ column }) => (
    <DataTableColumnHeader column={column} title="ACTIONS" />
  ),
  cell: ({ row }) => {
    const { menuActions, customActions } = row.original.actions;
    return (
      <div className="flex items-center justify-end pr-5">
        {customActions?.map((Action, i) => (
          <Action key={`action-${i}`} {...row.original} />
        ))}
        <DropdownMenu>
          <DropdownMenuTrigger asChild>
            <Button variant="ghost" className="h-8 w-8 p-0">
              <EllipsisVertical className="h-4 w-4" />
            </Button>
          </DropdownMenuTrigger>
          <DropdownMenuContent align="end">
            {menuActions.map(({ label, action, className, shortcut }) => (
              <DropdownMenuItem
                key={label}
                className={className}
                onSelect={() => action(row.original)}
              >
                {label}
                {shortcut && <DropdownMenuShortcut>{shortcut}</DropdownMenuShortcut>}
              </DropdownMenuItem>
            ))}
          </DropdownMenuContent>
        </DropdownMenu>
      </div>
    );
  },
}
```

### Cell Customization Tips

1. **Styling**:

   - Use Tailwind classes for consistent styling
   - Add responsive classes for mobile views
   - Use the `className` prop for custom styling

2. **Performance**:

   - Memoize complex cell renderers using `React.memo`
   - Keep cell components lightweight
   - Avoid heavy computations in cell renderers

3. **Accessibility**:

   - Add appropriate ARIA labels
   - Ensure keyboard navigation works
   - Maintain proper color contrast

4. **State Management**:
   - Use the `row.original` property to access the full row data
   - Handle cell updates through the table's state management
   - Use the `row.getValue()` method for column values

## Styling

The component uses Tailwind CSS for styling. You can customize the appearance by:

1. Modifying the Shell component's className:

```tsx
<Shell className="gap-2 custom-class">
```

2. Overriding the default styles in your global CSS:

```css
.revenue-table {
  /* Custom styles */
}
```

## Performance Considerations

- The component uses React Suspense for better loading performance
- Data is loaded lazily to improve initial page load
- Virtual scrolling is implemented for large datasets
- Memoization is used for expensive computations

## Error Handling

The component includes built-in error boundaries and will display appropriate error states when:

- Data loading fails
- Network errors occur
- Invalid data is provided

## Accessibility

- ARIA labels are included for all interactive elements
- Keyboard navigation is fully supported
- Screen reader compatibility is maintained
- Color contrast meets WCAG 2.1 standards

## Browser Support

- Chrome (latest)
- Firefox (latest)
- Safari (latest)
- Edge (latest)

## Dependencies

- React 18+
- @tanstack/react-table
- @cash-compass/ui
- @cash-compass/utils
- lucide-react

## Contributing

When contributing to this component:

1. Follow the existing patterns for cell rendering
2. Maintain consistent styling using Tailwind
3. Add appropriate TypeScript types
4. Include accessibility features
5. Add tests for new functionality
6. Update documentation for any changes

## License

This component is part of the Cash Compass project and is subject to its licensing terms.
